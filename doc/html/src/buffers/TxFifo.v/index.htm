<html>
<head>
<title>TxFifo.v</title>
<link rel="stylesheet" href="./../../../css/hde.css">
<meta name="Author" content="Steve, Base2Designs">
<meta name="Generator" content="Active-HDL, Version 6.3.1444, Expiration Date: September 30, 2004\n\nCopyright © ALDEC, Inc. All rights reserved.">
</head>
<body>
<pre>
<span id=t_com>//////////////////////////////////////////////////////////////////////</span>
<span id=t_com>////                                                              ////</span>
<span id=t_com>//// TxFifo.v                                                     ////</span>
<span id=t_com>////                                                              ////</span>
<span id=t_com>//// This file is part of the usbhostslave opencores effort.</span>
<span id=t_com>//// &lt;http://www.opencores.org/cores//&gt;                           ////</span>
<span id=t_com>////                                                              ////</span>
<span id=t_com>//// Module Description:                                          ////</span>
<span id=t_com>////  parameterized TxFifo wrapper. Min depth = 2, Max depth = 65536</span>
<span id=t_com>////  fifo write access via bus interface, fifo read access is direct</span>
<span id=t_com>//// </span>
<span id=t_com>////                                                              ////</span>
<span id=t_com>//// To Do:                                                       ////</span>
<span id=t_com>//// </span>
<span id=t_com>////                                                              ////</span>
<span id=t_com>//// Author(s):                                                   ////</span>
<span id=t_com>//// - Steve Fielding, sfielding@base2designs.com                 ////</span>
<span id=t_com>////                                                              ////</span>
<span id=t_com>//////////////////////////////////////////////////////////////////////</span>
<span id=t_com>////                                                              ////</span>
<span id=t_com>//// Copyright (C) 2004 Steve Fielding and OPENCORES.ORG          ////</span>
<span id=t_com>////                                                              ////</span>
<span id=t_com>//// This source file may be used and distributed without         ////</span>
<span id=t_com>//// restriction provided that this copyright statement is not    ////</span>
<span id=t_com>//// removed from the file and that any derivative work contains  ////</span>
<span id=t_com>//// the original copyright notice and the associated disclaimer. ////</span>
<span id=t_com>////                                                              ////</span>
<span id=t_com>//// This source file is free software; you can redistribute it   ////</span>
<span id=t_com>//// and/or modify it under the terms of the GNU Lesser General   ////</span>
<span id=t_com>//// Public License as published by the Free Software Foundation; ////</span>
<span id=t_com>//// either version 2.1 of the License, or (at your option) any   ////</span>
<span id=t_com>//// later version.                                               ////</span>
<span id=t_com>////                                                              ////</span>
<span id=t_com>//// This source is distributed in the hope that it will be       ////</span>
<span id=t_com>//// useful, but WITHOUT ANY WARRANTY; without even the implied   ////</span>
<span id=t_com>//// warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR      ////</span>
<span id=t_com>//// PURPOSE. See the GNU Lesser General Public License for more  ////</span>
<span id=t_com>//// details.                                                     ////</span>
<span id=t_com>////                                                              ////</span>
<span id=t_com>//// You should have received a copy of the GNU Lesser General    ////</span>
<span id=t_com>//// Public License along with this source; if not, download it   ////</span>
<span id=t_com>//// from &lt;http://www.opencores.org/lgpl.shtml&gt;                   ////</span>
<span id=t_com>////                                                              ////</span>
<span id=t_com>//////////////////////////////////////////////////////////////////////</span>
<span id=t_com>//</span>
<span id=t_com>// $Id: index.htm,v 1.1.1.1 2004-10-11 03:58:30 sfielding Exp $</span>
<span id=t_com>//</span>
<span id=t_com>// CVS Revision History</span>
<span id=t_com>//</span>
<span id=t_com>// $Log: not supported by cvs2svn $</span>
<span id=t_com>//</span>

<span id=t_dir>`timescale</span> <span id=t_cns>1</span><span id=t_idt>ns</span> / <span id=t_cns>1</span><span id=t_idt>ps</span>

<span id=t_kwd>module</span> <span id=t_idt>TxFifo</span>(
  <span id=t_idt>clk</span>, 
  <span id=t_idt>rst</span>, 
  <span id=t_idt>fifoREn</span>, 
  <span id=t_idt>fifoEmpty</span>,
  <span id=t_idt>busAddress</span>, 
  <span id=t_idt>busWriteEn</span>, 
  <span id=t_idt>busStrobe_i</span>,
  <span id=t_idt>busFifoSelect</span>,
  <span id=t_idt>busDataIn</span>, 
  <span id=t_idt>busDataOut</span>,
  <span id=t_idt>fifoDataOut</span> ); 
  <span id=t_com>//FIFO_DEPTH = ADDR_WIDTH^2</span>
  <span id=t_kwd>parameter</span> <span id=t_idt>FIFO_DEPTH</span> = <span id=t_cns>64</span>; 
  <span id=t_kwd>parameter</span> <span id=t_idt>ADDR_WIDTH</span> = <span id=t_cns>6</span>;   
  
<span id=t_kwd>input</span> <span id=t_idt>clk</span>; 
<span id=t_kwd>input</span> <span id=t_idt>rst</span>; 
<span id=t_kwd>input</span> <span id=t_idt>fifoREn</span>; 
<span id=t_kwd>output</span> <span id=t_idt>fifoEmpty</span>;
<span id=t_kwd>input</span> [<span id=t_cns>2</span>:<span id=t_cns>0</span>] <span id=t_idt>busAddress</span>; 
<span id=t_kwd>input</span> <span id=t_idt>busWriteEn</span>; 
<span id=t_kwd>input</span> <span id=t_idt>busStrobe_i</span>;
<span id=t_kwd>input</span> <span id=t_idt>busFifoSelect</span>;
<span id=t_kwd>input</span> [<span id=t_cns>7</span>:<span id=t_cns>0</span>] <span id=t_idt>busDataIn</span>; 
<span id=t_kwd>output</span> [<span id=t_cns>7</span>:<span id=t_cns>0</span>] <span id=t_idt>busDataOut</span>;
<span id=t_kwd>output</span> [<span id=t_cns>7</span>:<span id=t_cns>0</span>] <span id=t_idt>fifoDataOut</span>;

<span id=t_kwd>wire</span> <span id=t_idt>clk</span>; 
<span id=t_kwd>wire</span> <span id=t_idt>rst</span>; 
<span id=t_kwd>wire</span> <span id=t_idt>fifoREn</span>; 
<span id=t_kwd>wire</span> <span id=t_idt>fifoEmpty</span>;
<span id=t_kwd>wire</span> [<span id=t_cns>2</span>:<span id=t_cns>0</span>] <span id=t_idt>busAddress</span>; 
<span id=t_kwd>wire</span> <span id=t_idt>busWriteEn</span>; 
<span id=t_kwd>wire</span> <span id=t_idt>busStrobe_i</span>;
<span id=t_kwd>wire</span> <span id=t_idt>busFifoSelect</span>;
<span id=t_kwd>wire</span> [<span id=t_cns>7</span>:<span id=t_cns>0</span>] <span id=t_idt>busDataIn</span>; 
<span id=t_kwd>wire</span> [<span id=t_cns>7</span>:<span id=t_cns>0</span>] <span id=t_idt>busDataOut</span>;
<span id=t_kwd>wire</span> [<span id=t_cns>7</span>:<span id=t_cns>0</span>] <span id=t_idt>fifoDataOut</span>;

<span id=t_com>//internal wires and regs</span>
<span id=t_kwd>wire</span> <span id=t_idt>fifoWEn</span>;
<span id=t_kwd>wire</span> <span id=t_idt>forceEmpty</span>;
<span id=t_kwd>wire</span> [<span id=t_cns>15</span>:<span id=t_cns>0</span>] <span id=t_idt>numElementsInFifo</span>;
<span id=t_kwd>wire</span> <span id=t_idt>fifoFull</span>;

<span id=t_idt>fifoRTL</span> #(<span id=t_cns>8</span>, <span id=t_idt>FIFO_DEPTH</span>, <span id=t_idt>ADDR_WIDTH</span>) <span id=t_idt>u_fifo</span>(
  .<span id=t_idt>clk</span>(<span id=t_idt>clk</span>), 
  .<span id=t_idt>rst</span>(<span id=t_idt>rst</span>), 
  .<span id=t_idt>dataIn</span>(<span id=t_idt>busDataIn</span>), 
  .<span id=t_idt>dataOut</span>(<span id=t_idt>fifoDataOut</span>), 
  .<span id=t_idt>fifoWEn</span>(<span id=t_idt>fifoWEn</span>), 
  .<span id=t_idt>fifoREn</span>(<span id=t_idt>fifoREn</span>), 
  .<span id=t_idt>fifoFull</span>(<span id=t_idt>fifoFull</span>), 
  .<span id=t_idt>fifoEmpty</span>(<span id=t_idt>fifoEmpty</span>), 
  .<span id=t_idt>forceEmpty</span>(<span id=t_idt>forceEmpty</span>), 
  .<span id=t_idt>numElementsInFifo</span>(<span id=t_idt>numElementsInFifo</span>) );
  
<span id=t_idt>TxfifoBI</span> <span id=t_idt>u_TxfifoBI</span>(
  .<span id=t_idt>address</span>(<span id=t_idt>busAddress</span>), 
  .<span id=t_idt>writeEn</span>(<span id=t_idt>busWriteEn</span>), 
  .<span id=t_idt>strobe_i</span>(<span id=t_idt>busStrobe_i</span>),
  .<span id=t_idt>clk</span>(<span id=t_idt>clk</span>), 
  .<span id=t_idt>rst</span>(<span id=t_idt>rst</span>), 
  .<span id=t_idt>fifoSelect</span>(<span id=t_idt>busFifoSelect</span>),
  .<span id=t_idt>busDataIn</span>(<span id=t_idt>busDataIn</span>), 
  .<span id=t_idt>busDataOut</span>(<span id=t_idt>busDataOut</span>),
  .<span id=t_idt>fifoWEn</span>(<span id=t_idt>fifoWEn</span>),
  .<span id=t_idt>fifoFull</span>(<span id=t_idt>fifoFull</span>),
  .<span id=t_idt>forceEmpty</span>(<span id=t_idt>forceEmpty</span>),
  .<span id=t_idt>numElementsInFifo</span>(<span id=t_idt>numElementsInFifo</span>)
  );

<span id=t_kwd>endmodule</span>
</pre>
</body>
</html>
